# Ixi-Keeper

Приложение для управления пользователями, товарами и заказами с использованием React, Express и PostgreSQL.

## Структура проекта

Проект разделен на две основные части:

- **client** - клиентская часть на React/TypeScript с архитектурой Feature-Sliced Design (FSD)
- **server** - серверная часть на Node.js/Express с интеграцией PostgreSQL

## Установка

1. **Установите зависимости:**
   ```bash
   npm run install:all
   ```
   Эта команда установит зависимости для корневого проекта, клиента и сервера.

2. **Настройте базу данных PostgreSQL:**
   
   **Вариант 1: Использование Docker (рекомендуется)**
   ```bash
   docker run --name ixi-postgres -e POSTGRES_PASSWORD=postgres -e POSTGRES_DB=ixi_keeper -p 5432:5432 -d postgres
   ```

   **Вариант 2: Локальная установка PostgreSQL**
   - Установите PostgreSQL через Homebrew (macOS):
     ```bash
     brew install postgresql@14
     ```
   - Запустите PostgreSQL сервис:
     ```bash
     brew services start postgresql@14
     ```
   - Создайте базу данных:
     ```bash
     createdb -U postgres ixi_keeper
     ```

## Запуск приложения

### Быстрый запуск (рекомендуется)
```bash
npm run dev
```
Эта команда одновременно запустит сервер и клиент.

### Раздельный запуск
Если нужно запустить компоненты отдельно:

1. **Запуск сервера:**
   ```bash
   cd server
   npm run dev
   ```
   Сервер будет доступен на http://localhost:3020

2. **Запуск клиента:**
   ```bash
   cd client
   npm run dev
   ```
   Клиент будет доступен на http://localhost:3021

### Продакшн
```bash
npm start
```

## Функциональность

### Основные возможности:
- **Управление пользователями** - создание, редактирование, удаление пользователей
- **Управление товарами и категориями** - полный CRUD для товаров с поддержкой категорий
- **Составные товары (коктейли)** - создание товаров из ингредиентов с автоматическим расчетом порций
- **Система заказов** - оформление заказов с автоматическим списанием остатков
- **Контроль остатков** - отслеживание количества товаров на складе

### Особенности составных товаров:
- Автоматический расчет доступных порций на основе остатков ингредиентов
- Умное списание при заказе: для составных товаров списываются ингредиенты согласно рецепту
- Визуальная индикация составных товаров в интерфейсе

## API Эндпоинты

### Основные таблицы:
API поддерживает CRUD операции для: `users`, `products`, `orders`, `categories`.

**Базовые операции для каждой таблицы:**
- **Создание**: `POST /api/{table}` - Добавить новый элемент
- **Чтение всех**: `GET /api/{table}` - Получить все элементы
- **Чтение одного**: `GET /api/{table}/{id}` - Получить конкретный элемент по ID
- **Обновление**: `PUT /api/{table}/{id}` - Обновить конкретный элемент по ID
- **Удаление**: `DELETE /api/{table}/{id}` - Удалить конкретный элемент по ID

### Специальные эндпоинты:
- **Ингредиенты товара**: `GET/POST/PUT/DELETE /api/products/{id}/ingredients` - Управление составом товаров

## Порты

- **Сервер API**: http://localhost:3020
- **Клиент**: http://localhost:3021

## Технологии

### Frontend:
- React 18 + TypeScript
- Vite (сборщик)
- React Router (маршрутизация)
- Axios (HTTP клиент)
- SCSS (стили)
- Feature-Sliced Design архитектура

### Backend:
- Node.js + Express
- PostgreSQL (база данных)
- Sequelize ORM
- dotenv (переменные окружения)

## Разработка

Проект использует архитектуру Feature-Sliced Design (FSD) для клиентской части:
```
client/src/
├── app/          # Конфигурация приложения
├── pages/        # Страницы приложения
├── features/     # Бизнес-логика и фичи
├── entities/     # Бизнес-сущности
└── shared/       # Переиспользуемые компоненты и утилиты
```
